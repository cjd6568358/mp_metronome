var e=require("../../D2781B611874D7CFB41E7366F1A8C176.js"),a=require("../../0C1254531874D7CF6A743C545888C176.js"),t=getApp();Page({data:{darkMode:"2",darkTheme:"dark",theme:"blue",statusBar:t.globalData.statusBar,customBar:t.globalData.customBar,navBarHeight:t.globalData.navBarHeight,redeemCode:""},onLoad:function(e){var a=this;wx.onThemeChange((function(e){"0"==t.globalData.darkMode&&(t.globalData.darkTheme=e.theme,a.setData({darkTheme:e.theme}),console.log("changetheme:",e.theme))}))},onShow:function(){this.setData({darkMode:t.globalData.darkMode,darkTheme:t.globalData.darkTheme,theme:t.globalData.theme}),wx.setNavigationBarColor({frontColor:"dark"==t.globalData.darkTheme?"#ffffff":"#000000",backgroundColor:"dark"==t.globalData.darkTheme?"#000000":"#ffffff"})},onShareAppMessage:function(){return t.onShareAppMessage()},onShareTimeline:function(){return t.onShareTimeline()},tapBack:function(){wx.navigateBack({delta:1})},changeRedeemInput:function(e){this.setData({redeemCode:e.detail.value.trim()})},tapRedeemButton:function(){wx.vibrateShort({type:"heavy"}),0!=this.data.redeemCode.length?e.request(a.verifyRedeem,{code:this.data.redeemCode},"POST").then((function(t){200==t.code?(setTimeout((function(){e.request(a.showUser,{},"POST").then((function(e){200==e.code&&wx.setStorageSync("userInfo",e.data)}))}),100),wx.showToast({title:"兑换成功",icon:"success",duration:1e3})):wx.showToast({title:t.msg,icon:"none",duration:1e3})})):wx.showToast({title:"请填写兑换码",icon:"none",duration:1e3})}});