require("@babel/runtime/helpers/Arrayincludes.js"),require("@babel/runtime/helpers/Arrayincludes.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("@babel/runtime/helpers/Arrayincludes.js");var e=require("@babel/runtime/helpers/slicedToArray.js"),a=require("@babel/runtime/helpers/toConsumableArray.js"),t=require("@babel/runtime/helpers/objectSpread2.js"),r=require("927AB8341874D7CFF41CD033B558C176.js"),n=require("50B40F501874D7CF36D267574997C176.js");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e[0].split("-"),t=e[1].split("-");if(3!==a.length||3!==t.length)return r.logger.warn('enableArea() 参数格式为: ["2018-2-1", "2018-3-1"]'),{};var n=r.dateUtil.newDate(a[0],a[1],a[2]).getTime(),i=r.dateUtil.newDate(t[0],t[1],t[2]).getTime();return{start:a,end:t,startTimestamp:n,endTimestamp:i}}function l(e){var a=i(e),t=a.start,n=a.end,l=a.startTimestamp,d=a.endTimestamp;if(t&&n){var s=r.dateUtil.getDatesCountOfMonth(t[0],t[1]),u=r.dateUtil.getDatesCountOfMonth(n[0],n[1]);return t[2]>s||t[2]<1?(r.logger.warn("enableArea() 开始日期错误，指定日期不在指定月份天数范围内"),!1):t[1]>12||t[1]<1?(r.logger.warn("enableArea() 开始日期错误，月份超出1-12月份"),!1):n[2]>u||n[2]<1?(r.logger.warn("enableArea() 截止日期错误，指定日期不在指定月份天数范围内"),!1):n[1]>12||n[1]<1?(r.logger.warn("enableArea() 截止日期错误，月份超出1-12月份"),!1):!(l>d)||(r.logger.warn("enableArea()参数最小日期大于了最大日期"),!1)}}function d(e,a,n){var i=t({},e),l=function(e){var a=e.disableMode;return a?{disableBound:r.dateUtil.getTimeStamp(a.date)||r.dateUtil.todayTimestamp(),disableType:a.type}:{}}(n),d=l.disableType,s=l.disableBound;return i.disable=!!("before"===d&&s&&a<s||"after"===d&&s&&a>s),i}exports.default=function(){return{name:"enable",beforeRender:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=n.dates,s=n.enableArea,u=n.enableDates,o=n.disableDates,b=n.renderCausedBy,f=a(l).map((function(a){var n=t({},a),l=r.dateUtil.toTimeStr(a),f=+r.dateUtil.getTimeStamp(n);if("enableDates"===b){if(u&&u.length)return u.includes(l)?n.disable=!1:n.disable=!0,n}else if("enableArea"===b){if(s&&s.length){var m=e(s||[],2),c=m[0],g=m[1],p=+c>f||f>+g;return n.disable=p,n}}else if("disableDates"===b&&o&&o.length)return o&&o.includes(l)&&(n.disable=!0),n;return d(n,f,i)}));return{calendarData:t(t({},n),{},{dates:f}),calendarConfig:i}},methods:function(e){return{enableArea:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(2!==a.length)return Promise.inject('enableArea()参数需为时间范围数组，形如：["2018-8-4" , "2018-8-24"]');var d=l(a);if(d){var s=(0,r.getCalendarData)("calendar",e),u=i(a),o=u.startTimestamp,b=u.endTimestamp;return n.renderCalendar.call(e,t(t({},s),{},{renderCausedBy:"enableArea",enableArea:[o,b]}))}},enableDates:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(i.length){var l=(0,r.getCalendarData)("calendar",e),d=l||{},s=d.enableDates,u=void 0===s?[]:s,o=i.map((function(e){return"string"==typeof e?r.dateUtil.transformDateRow2Dict(e):e}));return u.length&&(o=r.dateUtil.uniqueArrayByDate([].concat(a(o),a(u.map((function(e){return r.dateUtil.transformDateRow2Dict(e)})))))),n.renderCalendar.call(e,t(t({},l),{},{renderCausedBy:"enableDates",enableDates:o.map((function(e){return"string"!=typeof e?r.dateUtil.toTimeStr(e):e}))}))}},disableDates:function(i){var l=(0,r.getCalendarData)("calendar",e),d=l||{},s=d.disableDates,u=void 0===s?[]:s,o=d.dates,b=void 0===o?[]:o,f=i.map((function(e){return"string"==typeof t({},e)?r.dateUtil.transformDateRow2Dict(e):e}));return u&&u.length&&(f=r.dateUtil.uniqueArrayByDate([].concat(a(f),a(u.map((function(e){return r.dateUtil.transformDateRow2Dict(e)})))))),n.renderCalendar.call(e,t(t({},l),{},{renderCausedBy:"disableDates",dates:b,disableDates:f.map((function(e){return"string"!=typeof e?r.dateUtil.toTimeStr(e):e}))}))}}}}};