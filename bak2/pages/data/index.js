var a=require("../../D2781B611874D7CFB41E7366F1A8C176.js"),t=require("../../0C1254531874D7CF6A743C545888C176.js"),e=getApp();Page({data:{darkMode:"2",darkTheme:"dark",theme:"blue",statusBar:e.globalData.statusBar,customBar:e.globalData.customBar,navBarHeight:e.globalData.navBarHeight,calendarConfig:{theme:"elegant",highlightToday:!0,inverse:!0,markToday:"今",hideYearHeader:!0,onlyShowCurrentMonth:!0,firstDayOfWeek:"Mon"},summary:{continuousDays:0,totalDays:0,totalMinutes:0,todayMinutes:0,totalHours:0},currentYear:2023,currentMonth:9,currentDate:14,currentDatas:[],currentMinute:0,showDateDialog:!1},onLoad:function(n){var o=this,r=new Date;o.setData({currentYear:r.getFullYear(),currentMonth:r.getMonth()+1,currentDate:r.getDate()}),a.request(t.dataSummary,{},"GET").then((function(a){200==a.code&&o.setData({summary:{continuousDays:a.data.continuousDays,totalDays:a.data.totalDays,totalMinutes:a.data.totalMinutes,totalHours:a.data.totalMinutes>60?Math.floor(a.data.totalMinutes/60):0}})})),wx.onThemeChange((function(a){"0"==e.globalData.darkMode&&(e.globalData.darkTheme=a.theme,o.setData({darkTheme:a.theme}),console.log("changetheme:",a.theme))}))},onShow:function(){this.setData({darkMode:e.globalData.darkMode,darkTheme:e.globalData.darkTheme,theme:e.globalData.theme}),wx.setNavigationBarColor({frontColor:"dark"==e.globalData.darkTheme?"#ffffff":"#000000",backgroundColor:"dark"==e.globalData.darkTheme?"#000000":"#ffffff"})},onShareAppMessage:function(){return e.onShareAppMessage()},onShareTimeline:function(){return e.onShareTimeline()},tapBack:function(){wx.navigateBack({delta:1})},tapSubscribe:function(){wx.requestSubscribeMessage({tmplIds:["yuCmjp9sCqLAVo1cTt5gCqOuP3NqyqOspIUgjNOsNq8"],success:function(a){wx.showToast({title:"订阅成功",icon:"none",duration:1e3})}})},closeDateDialog:function(){this.setData({showDateDialog:!1})},adLoad:function(){console.log("Banner 广告加载成功")},adError:function(a){console.error("Banner 广告加载失败",a)},adClose:function(){console.log("Banner 广告关闭")},afterCalendarRender:function(a){this.renderDateDot()},afterTapDate:function(a){var t;!a.detail.class||"checked"!=a.detail.class&&"checked checked-light"!=a.detail.class||(this.data.currentDatas.forEach((function(e){e.date==a.detail.date&&e.month==a.detail.month&&(t=e.count)})),this.setData({currentDate:a.detail.date,currentMinute:t||0,showDateDialog:!0}))},onSwipe:function(a){console.log("onSwipe",a.detail),this.setData({currentYear:a.detail.next.year,currentMonth:a.detail.next.month}),this.renderDateDot()},renderDateDot:function(){var e=this,n=this.selectComponent("#calendar").calendar;a.request(t.dataCalendar,{year:e.data.currentYear,month:e.data.currentMonth},"POST").then((function(a){200==a.code&&(e.setData({currentDatas:a.data}),n.setDateStyle(a.data))}))},handleShowVip:function(){wx.navigateTo({url:"/pages/vip/index"})}});